<template name="editProject">
{{#if isOwner}}
  {{#if currentUser}}

<div class="container text-center">
  {{#if hasTopRole}}
  <h1 class="h1-title">DATOS DEL PROYECTO</h1>
  {{else}}
  <h1 class="h1-title">DATOS DEL PORTAFOLIO</h1>
  {{/if}}
  <h2>{{projData.project_title}}</h2>
  <hr>
</div>
<div class="container">
  <div class="row">
    <div class="col-lg-3 rounded background-verylightgray p-3">
      <div class="sticky-top">
        <div class="row">
          <div class="col d-flex justify-content-center">
            <strong>{{projData.project_title}}</strong>
          </div>
        </div>
        <div class="spacer40"></div>
        <div><hr></div>
        <div class="row">
          <div class="col text-14">
            {{#if hasTopRole}}
            <a href="/projectPage/{{projData._id}}" class="text-purple"><i class="fa fa-eye"></i> Ver proyecto</a>    
            {{else}}
            <a href="/projectPage/{{projData._id}}" class="text-purple"><i class="fa fa-eye"></i> Ver portafolio</a>    
            {{/if}}
          </div>
        </div>
        <div class="spacer10"></div>
        <div class="row">
          <div class="col text-14">
            <a href="/mediaEditorObject/{{currentUser._id}}/project/{{currentUser._id}}/global" class="text-purple" id=""><i class="fa fa-camera"></i> Tus imágenes</a>
          </div>
        </div>
        <div class="spacer40"></div>
        <div><hr></div>
        <div class="row">
          <div class="col text-14">Portada <a href="#" class="text-purple" id="openMediaCover">Cambiar <i class="fa fa-pencil"></i></a></div>
        </div>
        <div class="row">
          <div class="col">
            {{#if getProjectPicture}}
            <img id="image" src="{{getProjectPicture}}" class="thumbnail-project"/>
            {{else}}
            <img id="image" src="/images/c4.jpg" class="thumbnail-project"/>
            {{/if}}
          </div>
        </div>
        <div class="spacer40"></div>
        {{#if hasTopRole}}
        <div><hr></div>
        <div class="row">
          <div class="col text-14">Póster <a href="#" class="text-purple" id="openMediaPoster">Cambiar <i class="fa fa-pencil"></i></a></div>
        </div>
        <div class="row">
          <div class="col">
            {{#if getProjectPoster}}
            <img id="image" src="{{getProjectPoster}}" class="thumbnail-poster"/>
            {{else}}
            <img id="image" src="/images/no-poster.jpg" class="thumbnail-poster"/>
            {{/if}}
          </div>
        </div>
        {{/if}}
      </div>
    </div>
    <div class="col-lg-9">
      <div class="container">
        <div class="row">
          <!--Inicia contenido-->
           <div class="col-md-12">
                 <div class="row">
                    <div class="col">
                       <label for="proj_name">Título: <span class="text-purple">(Requerido)</span></label>
                    </div>
                    <div class="col">
                       <input type="text" id="proj_name" class="form-control" placeholder="Proyecto" value="{{projData.project_title}}" maxlength="150">
                    </div>
                 </div>
                 <div class="spacer20"></div>
                 <div class="row">
                    <div class="col"><label for="proj_type">Tipo: <span class="text-purple">(Requerido)</span></label></div>
                    <div class="col">
                       <select name="proj_type" id="proj_type" class="form-control">
                          <option value="" disabled selected style='display:none;'> Seleccione </option>
                          {{#each getProjectType}}
                          <option value="{{this}}" {{typeSelected this}}> {{this}} </option>
                          {{/each}}
                          
                       </select>
                    </div>
                 </div>
                 <div class="spacer20"></div>
                 <div class="row">
                    <div class="col"><label for="proj_gender">Género: <span class="text-purple">(Requerido)</span></label></div>
                    <div class="col">
                       <select name="proj_type" id="proj_gender" class="form-control">
                          <option value="" disabled selected style='display:none;'> Seleccione </option>
                          {{#each getProjectGender}}
                          <option value="{{this}}" {{genderSelected this}}> {{this}} </option>
                          {{/each}}
                          
                       </select>
                    </div>
                 </div>
                 <div class="spacer20"></div>
                 <div class="row">
                    <div class="col"><label for="proj_gender">Estatus: <span class="text-purple">(Requerido)</span></label></div>
                    <div class="col">
                       <select name="proj_status" id="proj_status" class="form-control">
                          <option value="" disabled selected style='display:none;'> Seleccione </option>
                          {{#each getProjectStatus}}
                          <option value="{{this}}" {{statusSelected this}}> {{this}} </option>
                          {{/each}}
                          
                       </select>
                    </div>
                 </div>
                 <div class="spacer20"></div>
                 <div class="row">
                    <div class="col"><label for="proj_desc">Descripción / Sinopsis: <span class="text-purple">(Requerido)</span></label></div>
                    <div class="col">
                       <textarea class="form-control" rows="5" id="proj_desc" value="" placeholder="Descripción del proyecto ({{maxLength}} caracteres máx)." maxlength="{{maxLength}}">{{resume}}</textarea><small>Caracteres restantes:</small> <div id="max" class="agreements"></div>
                    </div>
                 </div>
                 <div class="spacer20"></div>
                 <div class="row">
                    <div class="col"><label for="proj_year">Año: <span class="text-purple">(Requerido)</span></label></div>
                    <div class="col">
                       <select name="proj_year" id="proj_year" class="form-control">
                          <option value="" disabled selected style='display:none;'> Seleccione </option>
                          {{#each getAvailableYears}}
                             <option value="{{this}}" {{yearSelected this}}> {{this}} </option>   
                          {{/each}}
                       </select>
                    </div>
                 </div>
                 {{#if hasTopRole}}
                 <div class="spacer20"></div>
                 <div class="row">
                   <div class="col"><label for="proj_year">¿Fuiste el Productor, Director o ambos en este proyecto?</label></div>
                 </div>
                 <div class="row">
                  <div class="col">
                    <input type="checkbox" value="Productor" id="check1" class="profile" {{verifyProductor}}> Productor
                  </div>
                 </div>
                 <div class="row">
                   <div class="col">
                     <input type="checkbox" value="Director" id="check2" class="profile" {{verifyDirector}}> Director
                   </div>
                 </div>
                 {{/if}}
                 {{#if hasTopRole}}
                 <div class="spacer20"></div>
                 <div class="row">
                    <div class="col-md-6">
                        <label for="oc">Departamentos <span class="text-purple">(Selecciona al menos uno)</span></label>
                         <select name="category" id="category" class="form-control">
                           {{#each getCategories}}
                              <option value="{{title}}"> {{title}} </option>
                           {{/each}}
                        </select>
                    </div>
                    <div class="col-md-6">
                       <label for="Ocupation">Rol: <span class="text-purple">(Selecciona con doble clic)</span></label>
                       <select multiple name="Ocupation" id="ocupation" class="form-control">
                         {{#each getOcupationsFromCategory}}
                            <option value="{{secondary}}" {{roleSelected secondary}}> {{secondary}} </option>
                         {{/each}}
                      </select>  
                    </div>
                 </div>
                 <div class="spacer20"></div>
                 <div class="row">
                    <div class="col-md-12">
                       <label for="Ocupation">Roles seleccionados <span class="text-purple">(Elimina con doble clic)</span></label>
                       <select name="Selection" multiple id="selection" class="form-control">
                         {{#each item in getRolesSelected}}
                            <option value="{{item}}" {{roleSelected item}}> {{item}} </option>
                         {{/each}}
                      </select>  
                    </div>
                    
                 </div>
                 {{/if}}
                 <!--
                 <div class="spacer20"></div>
                 <div class="row">
                    <div class="col"><label for="proj_main">Marcar como principal: </label></div>
                    <div class="col">
                       <input type="checkbox" id="proj_main" {{ isMainProject }}>
                       <small class="agreements">El proyecto se mostrará en la parte superior de tu perfil, con una imagen más grande</small>
                       {{#if isMainProject}}
                       <input type="hidden" name="isMainProject" id="isMainProject" value="true">
                       {{else}}
                       <input type="hidden" name="isMainProject" id="isMainProject" value="">
                       {{/if}}
                    </div>
                 </div>
               -->
                 <div class="spacer20"></div>
                 <div class="row">
                    <div class="col"><label for="web">Página Web:</label></div>
                 </div>
                 <div class="spacer20"></div>
                 <div class="row">
                    <div class="col">
                       <div class="input-group">
                          <div class="input-group-prepend">
                            <div class="input-group-text"><i class="fa fa-globe fa-lg"></i></div>
                         </div>
                          <input type="text" class="form-control" id="proj_web_page" value="{{projData.project_web_page}}" placeholder="Ej: www.cinekomuna.com" maxlength="120">
                       </div>
                    </div>
                 </div>
                 <div class="spacer20"></div>
                 <div class="row">
                    <div class="col"><label for="web">En la red:</label></div>
                 </div>
                 <div class="spacer20"></div>
                 <div class="row">
                 <div class="col">
                    <div class="input-group">
                       <div class="input-group-prepend">
                         <div class="input-group-text"><i class="fa fa-facebook fa-lg"></i></div>
                      </div>
                       <input  type="text" class="form-control" id="proj_facebook_page" value="{{projData.project_facebook_page}}" placeholder="Ej. www.facebook.com/cinekomuna" maxlength="120">
                    </div>
                 </div>
              </div>
              <div class="spacer20"></div>
              <div class="row">
                 <div class="col">
                    <div class="input-group">
                       <div class="input-group-prepend">
                         <div class="input-group-text"><i class="fa fa-twitter fa-lg"></i></div>
                      </div>
                       <input type="text" class="form-control" id="proj_twitter_page" value="{{projData.project_twitter_page}}" placeholder="Ej. www.twitter.com/cinekomuna" maxlength="120">
                    </div>
                 </div>
              </div>
              <div class="spacer20"></div>
              <div class="row">
                 <div class="col">
                    <div class="input-group">
                       <div class="input-group-prepend">
                         <div class="input-group-text"><i class="fa fa-vimeo fa-lg"></i></div>
                      </div>
                       <input type="text" class="form-control" id="proj_vimeo_page" value="{{projData.proj_vimeo_page}}" placeholder="Ej. www.vimeo.com/cinekomuna" maxlength="120">
                    </div>
                 </div>
              </div>
              <div class="spacer20"></div>
              <div class="row">
                 <div class="col">
                    <div class="input-group">
                       <div class="input-group-prepend">
                         <div class="input-group-text"><i class="fa fa-youtube fa-lg"></i></div>
                      </div>
                       <input  type="text" class="form-control" id="proj_youtube_page" value="{{projData.proj_youtube_page}}" placeholder="Ej. www.youtube.com/cinekomuna" maxlength="120">
                    </div>
                 </div>
              </div>
              <div class="spacer20"></div>
              <div class="row">
                 <div class="col">
                    <div class="input-group">
                       <div class="input-group-prepend">
                         <div class="input-group-text"><i class="fa fa-instagram fa-lg"></i></div>
                      </div>
                       <input type="text" class="form-control" id="proj_instagram_page" value="{{projData.proj_instagram_page}}" placeholder="Ej. www.instagram.com/cinekomuna" maxlength="120">
                    </div>
                 </div>
              </div>
              {{#if hasTopRole}}
              <div class="spacer20"></div>
                 <div class="row">
                    <div class="col-lg-12"><label for="web">Se puede ver en:</label></div>
                 </div>
                 <div class="row">
                   <div class="col-lg-12 agreements">
                     Si tu película ya se encuentra en una plataforma de streaming (Netflix, Amazon Prime, Filminlatino, Cinépolis Klic o alguna otra plataforma independiente) puedes incluir aquí el link, el cual generará un botón de play que aparecerá en el perfil de tu proyecto y que redireccionará a los visitantes para que puedan ver tu película.
                   </div>
                 </div>
              <div class="spacer20"></div>
              <div class="row">
                 <div class="col">
                    <div class="input-group">
                       <div class="input-group-prepend">
                         <div class="input-group-text"><i class="fa fa-play-circle fa-lg"></i></div>
                      </div>
                       <input type="text" class="form-control" id="proj_external_view" value="{{projData.proj_external_view}}" placeholder="Ej. www.filminlatino.com/miproyectoID" maxlength="120">
                    </div>
                 </div>
              </div>
              {{/if}}

            <div class="spacer40"></div>
              <div class="row">
                <div class="col-lg-12">Galería de imágenes <a href="#" class="text-purple" data-toggle="modal" data-target="#modal4"><br>Agregar <i class="fa fa-pencil"></i></a></div>
              </div>
              {{#if getGallery}}
              <div class="row">
                <div class="col-lg-12">
                  <!--Inicia carrousel -->
                  <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                      {{#each getGallery}}
                        {{#if isFirstElement this.position}}
                      <div class="carousel-item active">
                        <img class="d-block w-100" src="{{getURL this.mediaId}}" alt="First slide">
                      </div>
                        {{else}}
                      <div class="carousel-item carousel-item-thumb">
                        <img class="d-block w-100" src="{{getURL this.mediaId}}" alt="Not first slide">
                      </div>
                        {{/if}}
                      {{/each}}
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="sr-only">Anterior</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="sr-only">Siguiente</span>
                    </a>
                  </div>
                  <!--Termina carrousel -->
                    
                </div>
              </div>
              {{else}}
              <div class="row">
                <div class="col agreements">
                  Aún no agregas imágenes a tu galería
                </div>
              </div>
             
              {{/if}}
             <div class="row">
                <div class="col spacer80"></div>
             </div>
             <div class="row">
                <div class="col">
                  <button class="btn btn-purple" id="save">Guardar</button>
                  <button class="btn btn-purple" id="saveAndPublish">Guardar y publicar</button>
                </div>
              </div>
           </div>

        

     <!--Modal: Name-->
  <div class="modal fade" id="modal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">

      <!--Content-->
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Elige tu foto de portada</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <!--Body-->
        <div class="modal-body">

          <div class="container">
            <div class="row">
              <div class="col-lg-12 text-center">
                <label class="custom-file-upload">
                  <input type="file"/>
                  <span class="btn btn-purple btn-rounded">Cargar foto &nbsp;<i class="fa fa-upload"></i></span>
                </label>
              </div>
            </div>
            {{#if hasMedia}}
            <div class="row background-verylightgray light-padding">
              {{#each getMedia}}
              <div class="col-lg-3 col-sm-6 align-self-center">
                <a href="#" id="selectCoverPicture" data-id="{{this.mediaId}}"><img class="media-thumb z-depth-1" src="{{this.media_url}}" alt="image" id="{{this._id}}"></a>
              </div>
              {{/each}}
            </div>
            {{else}}
            <div class="spacer20"></div>
            <div class="row">
              <div class="col">
                Tu biblioteca de imágenes está vacía. Agrega imágenes antes de usarlas.
              </div>
            </div>
            <div class="spacer20"></div>
            <div class="row">
              <div class="col text-center">
                <button class="btn btn-purple goMediaLibraryCover">Ir a biblioteca de imágenes</button>
              </div>
            </div>
            {{/if}}
          </div>


        </div>

        <!--Footer-->
        <div class="modal-footer justify-content-center">
          <div class="row">
            <div class="col-lg-6">
              <a href="#" class="btn btn-purple disabled" id="setCoverPicture" data-id="{{this.mediaId}}">Establecer como foto de portada</a>
            </div>
            <!--<div class="col-lg-5"><button type="button" class="btn btn-purple btn-rounded goMediaLibraryProfile" data-dismiss="modal">Agregar más imágenes</button></div>-->
            <!--<div class="col-lg-5"><input type="file" name="profile" id="nuestroinput"></div>-->
            
            <div class="col-lg-2">&nbsp;</div>
            <div class="col-lg-4"><button type="button" class="btn btn-purple btn-rounded" data-dismiss="modal">Cerrar</button></div>
            
          </div>



        </div>

      </div>
      <!--/.Content-->

    </div>
  </div>
  <!--Modal: Name-->

        <!--Modal: Name-->
        <div class="modal fade" id="modal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg" role="document">

            <!--Content-->
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Elige la foto para el póster</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>

              <!--Body-->
              <div class="modal-body">

                <div class="container">
                  <div class="row">
                    <div class="col-lg-12 text-center">
                      <label class="custom-file-upload">
                        <input type="file"/>
                        <span class="btn btn-purple btn-rounded">Cargar foto &nbsp;<i class="fa fa-upload"></i></span>
                      </label>
                    </div>
                  </div>
                  <div class="row background-verylightgray light-padding">
                    {{#each getMedia}}
                    <div class="col-lg-3 col-sm-6 align-self-center">
                      <a href="#" id="selectPosterPicture" data-id="{{this.mediaId}}"><img class="media-thumb z-depth-1" src="{{this.media_url}}" alt="image" id="{{this._id}}"></a>
                    </div>
                    {{/each}}
                  </div>
                </div>


              </div>

              <!--Footer-->
              <div class="modal-footer justify-content-center">
                <div class="row">
                  <div class="col-lg-6">
                    <a href="#" class="btn btn-purple disabled" id="setPosterPicture" data-id="{{this.mediaId}}">Establecer como póster</a>
                  </div>
                  <!--<div class="col-lg-5"><button type="button" class="btn btn-purple btn-rounded goMediaLibraryProfile" data-dismiss="modal">Agregar más imágenes</button></div>-->
                  <!--<div class="col-lg-5"><input type="file" name="profile" id="nuestroinput"></div>-->
                  
                  <div class="col-lg-2">&nbsp;</div>
                  <div class="col-lg-4"><button type="button" class="btn btn-purple btn-rounded" data-dismiss="modal">Cerrar</button></div>
                  
                </div>



              </div>

            </div>
            <!--/.Content-->

          </div>
        </div>
        <!--Modal: Name-->

        <!--Modal: Name-->
        <div class="modal fade" id="modal4" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg" role="document">

            <!--Content-->
            <div class="modal-content">

              <!--Body-->
              <div class="modal-body">
                
                <div class="container">
                  <div class="row">
                    <div class="col text-center">Elige las imágenes para tu galería de fotos</div>
                  </div>
                  <div class="row">
                    <div class="col-lg-12 text-center">
                      <label class="custom-file-upload">
                        <input type="file"/>
                        <span class="btn btn-purple btn-rounded">Cargar foto &nbsp;<i class="fa fa-upload"></i></span>
                      </label>
                    </div>
                  </div>

                  {{#if hasMedia}}
                  
                  <div class="row background-verylightgray p-3">
                    {{#each getMedia}}
                    <div class="col-lg-3 col-sm-6 align-self-center justify-content-center">
                      <input type="checkbox" class="check" data-id="{{this.mediaId}}" {{verifyChecked this.mediaId}}><img class="media-thumb z-depth-1" src="{{this.media_url}}" alt="image">
                    </div>
                    {{/each}}
                  </div>
                  {{else}}
                  <div class="spacer20"></div>
                  <div class="row">
                    <div class="col">
                      Tu biblioteca de imágenes está vacía. Agrega imágenes antes de usarlas.
                    </div>
                  </div>
                  <div class="spacer20"></div>
                  <div class="row">
                    <div class="col text-center">
                      <button class="btn btn-purple goMediaLibrary">Ir a biblioteca de imágenes</button>
                    </div>
                  </div>
                  {{/if}}
                </div>
              </div>

              <!--Footer-->
              <div class="modal-footer justify-content-center">
                <div class="row">
                  <div class="col-lg-12"><button type="button" class="btn btn-purple btn-rounded" data-dismiss="modal">Cerrar</button></div>
                </div>
              </div>

            </div>
            <!--/.Content-->

          </div>
        </div>
        <!--Modal: Name-->
            <!--Termina contenido-->
          </div>
        </div>
      </div>
    </div>
  </div>
  {{/if}}
   
{{else}}
  <div class="contanier text-center">
    <div class="spacer80"></div>
    No tienes permiso de ver esta página
    <div class="spacer80"></div>
  </div>  
{{/if}}   
</template>
