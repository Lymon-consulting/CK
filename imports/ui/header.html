<template name="header">
<nav class="navbar navbar-dark bg-dark navbar-expand">
  <button class="navbar-toggler order-2" type="button" data-toggle="collapse" data-target="#navbar-list-9" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="/">
    <img src="/images/logo.svg" alt="logo" class="logo d-inline-block align-top">
  </a>
  <div class="collapse navbar-collapse justify-content-start w-100 order-3" id="navbar-list-9">
    {{#if currentUser}}
    {{#if isBoth}}
    <ul class="nav nav-pills">
      <li class="nav-item">
        <a class="nav-link disabled text-lightgray">Navegar como:</a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="#" id="viewAsCrew">Crew</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#" id="viewAsCast">Cast</a>
      </li>
      <li class="nav-item">
        <a class="border-md-right">&nbsp;</a>
      </li>
    </ul>
    {{/if}}
    {{/if}}
  </div>
  {{#if currentUser}}
  <div class="collapse navbar-collapse justify-content-end w-100 order-3" id="navbar-list-9">
      
      <ul class="navbar-nav">

        {{>notifications}}   

        <li class="nav-item">
          <a class="nav-link" href="/peopleList">Descubre</a>
        </li>
        <li class="nav-item">
          <a class="nav-link logout" href="#">Salir</a>
        </li>
      </ul>
      <ul class="navbar-nav">
          <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            {{>profile}}
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
            <div class="row">
              <div class="col-lg-3">
                {{#if getProfilePicture}}
                <img src="{{getProfilePicture}}"/>
                {{else}}
                <div id="profileImageMenu">{{getInitials}}</div>
                {{/if}}    
              </div>
              <div class="col-lg-9">
                <div class="row">
                  <div class="col-lg-12"><strong>{{firstName}} {{lastName}}</strong></div>
                </div>
                {{#if isCrew}}
                <div class="row">
                  <div class="col-lg-12 agreements">{{getCrewRoles}}</div>
                </div>
                {{/if}}
                {{#if isCast}}
                <div class="row">
                  <div class="col-lg-12 agreements">{{getCastRoles}}</div>
                </div>
                {{/if}}
              </div>
            </div>
            <div class="row">
              <div class="col"><div class="spacer10"></div></div>
            </div>
            <div class="row">
              <div class="col text-center">
                {{#if isCrew}}
                <a href="/profilePage/{{currentUser._id}}" class="text-purple"><strong>Ver perfil</strong></a>
                {{else}}
                <a href="/profilePageActor/{{currentUser._id}}" class="text-purple"><strong>Ver perfil</strong></a>
                {{/if}}
              </div>
            </div>
            <h4 class="dropdown-header">CUENTA</h4>
            {{#if isCrew}}
            <a class="dropdown-item text-black" href="/editProfile/{{currentUser._id}}">Editar perfil</a>
            {{else}}
            <a class="dropdown-item text-black" href="/editProfileActor/{{currentUser._id}}">Editar perfil</a>
            {{/if}}
           
            <div class="dropdown-divider"></div>
            
            <h4 class="dropdown-header">ADMINISTRAR</h4>
            {{#if isCrew}}
            {{#if hasTopRole}}
            <a class="dropdown-item text-black" href="/viewProjects/{{currentUser._id}}">Mis proyectos</a>
            {{/if}}
            {{/if}}
            {{#if isCrew}}
            <a class="dropdown-item text-black" href="/viewIndustries/{{currentUser._id}}">Mis industrias</a>
            {{/if}}
            <a class="dropdown-item text-black" href="/mediaEditor/{{currentUser._id}}">Mis imágenes</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item text-black logout" href="#">Salir</a>
            <!--
            <h4 class="dropdown-header">HERRAMIENTAS</h4>
            <a class="dropdown-item text-black" href="/jobs">Bolsa de trabajo</a>
            <a class="dropdown-item text-black" href="/blog">Blog</a> -->
          </div>
        </li>   
      </ul>    
  </div>
  {{else}}
  <div class="collapse navbar-collapse justify-content-end w-100 order-3" id="navbar-list-9">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/peopleList">Descubre</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/login">Entrar</a>
      </li>
    </ul>
  </div>
  {{/if}}
</nav>


</template>



<template name="profile">
{{#if loggingIn}}
  <p>Loggin in...</p>
{{else}}
  {{#if currentUser}}  
    {{#if getProfilePicture}}   
      <li class="nav-item vcenter">
        <a href="/profilePage/{{currentUser._id}}" class="text-button"><img src="{{getProfilePicture}}"/></a>
      </li>
   {{else}}
      <li class="nav-item vcenter">
        <a href="/profilePage/{{currentUser._id}}" class="text-button"><div id="profileImage">{{getInitials}}</div></a>
      </li>      
   {{/if}}
  
  {{/if}}
{{/if}}

</template>


<template name="notifications">
   <nav class="navbar navbar-default">
       <!-- Collect the nav links, forms, and other content for toggling -->
       <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
         <ul class="nav navbar-nav navbar-right">
           <li class="dropdown">
             <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class="fa fa-bell-o text-white">
               {{#if getAlerts.length}}
               <span class="badge badge-danger">{{getAlerts.length}}</span>
               {{/if}}
            </i></a>
             <ul class="dropdown-menu notify-drop">
               <div class="notify-drop-title">
                  <div class="row">
                     <div class="col-md-6 col-sm-6 col-xs-6">Notificaciones</div>
                     <div class="col-md-6 col-sm-6 col-xs-6 text-right"><a href="" class="rIcon allRead" data-tooltip="tooltip" data-placement="bottom" title="Ver"><i class="fa fa-dot-circle-o"></i></a></div>
                  </div>
               </div>
               <!-- end notify title -->
               <!-- notify content -->
               <div class="drop-content">
                  {{#each value in getAlerts}}
                     <li>
                        <div class="col-md-9 col-sm-9 col-xs-9">
                           <a href="/profilePage/{{value.ownerID}}">{{value.owner}}</a> ha indicado que participaste en <a href="/projectPage/{{value.projectID}}">{{value.title}}</a> como {{value.role}} <a href="" class="rIcon"><i class="fa fa-dot-circle-o"></i></a>
                        <p>¿Eres tú?</p>
                        <p class="time"><a href="#" class="confirmCollaboration" data-id="{{value.collabID}}" data-proj="{{value.projectID}}">Si participé</a> | <a href="#" class="denyColaboration" data-id="{{value.collabID}}" data-proj="{{value.projectID}}" data-ownerEmail="{{value.ownerEmail}}" data-collabEmail="{{value.collabEmail}}" data-title="{{value.title}}" data-collabRole="{{value.role}}">No participé</a></p>
                        </div>
                     </li>
                  {{/each}}
               </div>
               <div class="notify-drop-footer text-center">
                  <a href=""><i class="fa fa-eye"></i> Ver todas las notificaciones</a>
               </div>
             </ul>
           </li>
         </ul>
       </div><!-- /.navbar-collapse -->
   </nav>   
</template>

